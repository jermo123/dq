<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <title>DQ Courtenay Dashboard</title>
    <link rel="icon" href="logo.svg" type="image/svg+xml">

    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- CSS Libraries -->
    <!-- Updated Bootstrap to the latest version -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Styles -->
<style>
    /* Define CSS variables for themes */
    :root {
        --primary-color: #4e73df;
        --secondary-color: #2e59d9;
        --background-color: #f8f9fc;
        --text-color: #000;
        --sidebar-bg-color: var(--primary-color);
        --sidebar-text-color: #fff;
        --topbar-bg-color: #fff;
        --topbar-text-color: #000;
        --card-bg-color: #fff;
        --card-text-color: #000;
        --link-color: #4e73df;
        --link-hover-color: #2e59d9;
    }

    [data-theme="dark"] {
        --primary-color: #1a1a2e;
        --secondary-color: #16213e;
        --background-color: #121212;
        --text-color: #e0e0e0;
        --sidebar-bg-color: #1a1a2e;
        --sidebar-text-color: #e0e0e0;
        --topbar-bg-color: #1a1a2e;
        --topbar-text-color: #e0e0e0;
        --card-bg-color: #2c2c3e;
        --card-text-color: #e0e0e0;
        --link-color: #82aaff;
        --link-hover-color: #a3c1ff;
    }

    body {
        font-family: 'Nunito', sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        margin: 0;
        padding: 0;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    #wrapper {
        min-height: 100vh;
        display: flex;
    }

    /* Sidebar Styles */
    .sidebar {
        width: 250px;
        background-color: var(--sidebar-bg-color);
        color: var(--sidebar-text-color);
        flex-shrink: 0;
        transition: all 0.3s;
        height: 100vh;
        position: fixed;
        top: 0;
        left: 0;
        overflow-y: auto;
    }

    .sidebar .sidebar-brand {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        background-color: var(--secondary-color);
        font-size: 1.25rem;
        font-weight: 700;
        text-decoration: none;
        color: var(--sidebar-text-color);
    }

    .sidebar .nav-link {
        color: var(--sidebar-text-color);
        padding: 0.75rem 1.25rem;
        display: flex;
        align-items: center;
        transition: background 0.3s, color 0.3s;
        text-decoration: none;
    }

    .sidebar .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--link-hover-color);
        text-decoration: none;
    }

    .sidebar .nav-link i {
        margin-right: 0.75rem;
    }

    /* Collapsed Sidebar */
    .sidebar.collapsed {
        width: 70px;
    }

    .sidebar.collapsed .nav-link span {
        display: none;
    }

    .sidebar.collapsed .sidebar-brand span {
        display: none;
    }

    .sidebar.collapsed .sidebar-brand img {
        margin-right: 0;
    }

    /* Content Styles */
    #content-wrapper {
        margin-left: 250px;
        flex: 1;
        display: flex;
        flex-direction: column;
        transition: margin-left 0.3s;
    }

    .sidebar.collapsed + #content-wrapper {
        margin-left: 70px;
    }

    /* Topbar Styles */
    .topbar {
        background-color: var(--topbar-bg-color);
        color: var(--topbar-text-color);
        padding: 0.5rem 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 100;
    }

    .topbar .toggle-button {
        cursor: pointer;
        font-size: 1.5rem;
        color: var(--topbar-text-color);
    }

    /* Main Content */
    .container-fluid {
        padding: 2rem;
        flex: 1;
        overflow-y: auto;
    }

    /* Links */
    a {
        color: var(--link-color);
        transition: color 0.3s ease;
    }

    a:hover {
        color: var(--link-hover-color);
        text-decoration: underline;
    }

    /* Cards */
    .card {
        background-color: var(--card-bg-color);
        color: var(--card-text-color);
        border: none;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        border-radius: 10px;
        transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .card-header {
        background-color: transparent;
        border-bottom: none;
        font-weight: bold;
        font-size: 1.2rem;
    }

    .card-body a {
        color: var(--link-color);
    }

    .card-body a:hover {
        color: var(--link-hover-color);
        text-decoration: underline;
    }

    /* Footer Styles */
    .footer {
        background-color: var(--topbar-bg-color);
        color: var(--topbar-text-color);
        text-align: center;
        padding: 1rem;
        font-size: 0.9rem;
    }

    /* Responsive Styles */
    @media (max-width: 768px) {
        #wrapper {
            flex-direction: column;
        }

        .sidebar {
            width: 100%;
            height: auto;
            position: relative;
        }

        #content-wrapper {
            margin-left: 0;
        }

        .sidebar.collapsed {
            width: 100%;
        }

        .sidebar.collapsed + #content-wrapper {
            margin-left: 0;
        }
    }

    /* Slideshow Styles */
    #slideshow {
        position: relative;
        width: 100%;
        max-width: 100%;
        height: 400px;
        overflow: hidden;
        border-radius: 10px;
    }

    #slideshow img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        border-radius: 10px;
    }

    #slideshow img.active {
        opacity: 1;
        z-index: 1;
    }

    /* Button Styles */
    .btn-outline-secondary {
        color: var(--topbar-text-color);
        border-color: var(--topbar-text-color);
        transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }

    .btn-outline-secondary:hover {
        background-color: var(--topbar-text-color);
        color: var(--topbar-bg-color);
        border-color: var(--topbar-text-color);
    }

    /* Additional Enhancements */
    /* Scrollbar Styles for Dark Mode */
    [data-theme="dark"] ::-webkit-scrollbar {
        width: 8px;
    }

    [data-theme="dark"] ::-webkit-scrollbar-track {
        background: #1a1a2e;
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb {
        background-color: #3a3a5a;
        border-radius: 4px;
        border: 2px solid #1a1a2e;
    }

    /* Transition for theme changes */
    * {
        transition: background-color 0.3s ease, color 0.3s ease;
    }
</style>
</head>

<body>
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Sidebar -->
        <nav class="sidebar">
            <a href="#" class="sidebar-brand">
                <img src="dq_logo.png" alt="Icon" class="me-2" style="width: 32px; height: 24px;">
                <span>Courtenay</span>
            </a>
            <ul class="nav flex-column mt-4">
                <li class="nav-item">
                    <a class="nav-link" href="index.html?bypass=true">
                        <i class="fas fa-tachometer-alt"></i> <span>Dashboard</span>
                    </a>
                </li>
                <!-- Employee Management -->
                <li class="nav-item">
                    <a class="nav-link" href="javascript:void(0);" onclick="openWindow('https://script.google.com/macros/s/AKfycbyBJPhHge6kVOjpiOCCtuTfyRRR7dbmaeAuTPurjUbJkEG2MNPLQCLk3MCFAtBVSLPY/exec')">
                        <i class="fas fa-address-book"></i> <span>Business Directory</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="emailtemp.html">
                        <i class="fas fa-envelope"></i> <span>Email Templates</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="writetemp.html">
                        <i class="fas fa-file-alt"></i> <span>Write Up Templates</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="javascript:void(0);" onclick="openWindow('https://script.google.com/macros/s/AKfycbzy2NIfKJCEeSugpPvbuRzqAf6rZ8K6fheL4PMMB3WA8uQDN6ibbquM7scfTtNwwgGg/exec')">
                        <i class="fas fa-tools"></i> <span>Troubleshooting Guides</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="meeting.html">
                        <i class="fas fa-comments"></i> <span>Meeting Topics</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="shopping.html">
                        <i class="fas fa-shopping-cart"></i> <span>Shopping List</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="logsheet.html">
                        <i class="fas fa-paper-plane"></i> <span>Log Sheet Hub</span>
                    </a>
                </li>
                <!-- Add other nav items here -->
            </ul>
        </nav>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper">
            <!-- Topbar -->
            <nav class="topbar">
                <div class="toggle-button" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </div>
                <div id="datetime" class="fw-bold"></div>
                <div>
                    <button class="btn btn-outline-secondary" id="themeToggle">
                        <i class="fas fa-sun"></i>
                    </button>
                </div>
            </nav>
            <!-- End of Topbar -->

           <!-- Main Content -->
            <div class="container-fluid">
                <div class="row g-4">
                    <!-- Employee Management Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Employee Management
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><strong>Facebook:</strong> <a href="https://www.facebook.com/groups/CVDQStaff/" target="_blank">Group</a> | <a href="https://www.messenger.com/" target="_blank">Messenger</a></li>
                                    <li><strong>Employee Directory:</strong> <a href="https://docs.google.com/spreadsheets/d/1la4VopFS5jatDUIKOMrfl1mqsP-IxTg8I4_WgWalHOs/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Past Employee Log:</strong> <a href="#" target="_blank">Log Sheet</a></li>
                                    <li><strong>Employee Absence Tracker:</strong> <a href="#" target="_blank">Log Sheet</a></li>
                                    <li><strong>DQ Knowledge Quizzes:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSesYq3v5TmkSLkgwgnp9qwBUKnc27MY_UF6QRIzBJt1WKSkfw/viewform?usp=sf_link" target="_blank">Test Form</a> | <a href="https://docs.google.com/spreadsheets/d/13FBmUpQ_eOGbn9byOj9NR6I6c94MbDZpOo6cnyNB7fA/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Employee Review:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSemh1YxIjyLSEQZ3ncnhqhO5VkaBuUBuvQxVK_Jtx7xI6fSuQ/viewform?usp=sf_link" target="_blank">Review Form</a> | <a href="https://docs.google.com/spreadsheets/d/13FBmUpQ_eOGbn9byOj9NR6I6c94MbDZpOo6cnyNB7fA/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Online Team Management:</strong> <a href="https://admin7.brinkpos.net/Staff/Employees/" target="_blank">Brink</a> | <a href="https://dqhub.dairyqueen.net/store_tools/security-setup/manage-my-team" target="_blank">DQ Hub</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Store Management Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Store Management
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><strong>Equipment Logs:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSdyCmdRINv3d4swrR7SIqqmsg4hLsDZvRGCHNtkPIX8qjKvEQ/viewform?usp=sf_link" target="_blank">Entry Form</a> | <a href="https://docs.google.com/spreadsheets/d/1aZ3RUXGuFHt9XTrx7huS0_yj4XsxEPt_wl21vAXpBE4/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Garbage / Recycling:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSdggWHDDqHn3jetrel2urG00Kh74LWltTho3Y9QB7zBre7QpQ/viewform?usp=sf_link" target="_blank">Entry Form</a> | <a href="https://docs.google.com/spreadsheets/d/1ea0AmyRM3wC0XXfo3uw3HNdkob-ld_z8JRvTr_62G0U/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Waste Reporting:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSf1oiARDYknazjg3BIL9SuBxTkJ5vV91wwQ0iLUxoMfo4qXWQ/viewform?usp=sf_link" target="_blank">Entry Form</a> | <a href="https://docs.google.com/spreadsheets/d/1-g-AJ5706oFk1TAJV0_Wr09ogl_gSVE0EVm3FKzcuSM/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Complaints:</strong> <a href="https://docs.google.com/forms/d/e/1FAIpQLSdFwJ37JReVOUQrmVnIE6p5I3sPRvoqb5X-7DRJgIrBV_kjMA/viewform?usp=sf_link" target="_blank">Entry Form</a> | <a href="https://docs.google.com/spreadsheets/d/1zGIAC9Qw2GwwlFiiJfAeH39oxfX9NpPVwDSoSeoV7_Q/edit?usp=sharing" target="_blank">Log Sheet</a></li>
                                    <li><strong>Ordering:</strong> <a href="https://order.gfs.com/" target="_blank">GFS</a> | <a href="https://max.saputo.com/" target="_blank">Saputo</a> | <a href="https://orderonotto.ca/ordering-hub/routes" target="_blank">Bimbo</a></li>
                                    <li><strong>Price Sheet:</strong> <a href="https://docs.google.com/spreadsheets/d/1lqTJfWhLGd-kTf3Jy--JVs8JB4BS3Y-LvNpj1dtu98Y/edit?usp=sharing" target="_blank">Vancouver Island DQ Price Sheet</a></li>
                                    <li><strong>Online Cake Orders:</strong> <a href="#" target="_blank">View Orders</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Reminders Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Reminders
                            </div>
                            <div class="card-body">
                                <ul id="reminderList" class="list-unstyled">
                                    <!-- Reminders will be populated here -->
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Bookmarks Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Bookmarks
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><a href="https://app.powerbi.com/groups/me/apps/38f23e90-a4b3-4f32-b15f-6cef8e6f087f/reports/872a6174-ba12-4a45-a0e5-3f9db4dba2c7/ReportSectionabd51c50a7ed32740b07?ctid=a4372e52-83bf-450e-b320-c64c627b5dcc&experience=power-bi" target="_blank"><i class="fas fa-chart-bar"></i> DQ Analytics Reports</a></li>
                                    <li><a href="https://google.ca" target="_blank"><i class="fas fa-globe"></i> Google</a></li>
                                    <li><a href="http://grouphealth.websonline.ca/" target="_blank"><i class="fas fa-heartbeat"></i> GroupHEALTH</a></li>
                                    <li><a href="https://jermo123.github.io/cks/dashboard.html" target="_blank"><i class="fas fa-birthday-cake"></i> Cakes Dashboard</a></li>
                                    <li><a href="https://tfwp-jb.lmia.esdc.gc.ca/employer/" target="_blank"><i class="fas fa-briefcase"></i> LMIA Portal</a></li>
                                    <li><a href="https://payroll.payworks.ca/loginscreen.asp?LangId=0" target="_blank"><i class="fas fa-money-check-alt"></i> Payworks</a></li>
                                    <li><a href="https://mybusinesshub.rogers.com/" target="_blank"><i class="fas fa-rocket"></i> Rogers Business Hub</a></li>
                                    <li><a href="https://www.worksafebc.com/en" target="_blank"><i class="fas fa-hard-hat"></i> WorkSafe BC</a></li>
                                    <li><a href="https://www.wasteconnectionscanada.com/contact-us/" target="_blank"><i class="fas fa-trash-alt"></i> Report Missed Garbage Pickup</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Portals and Tools Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Portals and Tools
                            </div>
                            <div class="card-body">
                                <ul class="list-unstyled">
                                    <li><strong>Brink:</strong> <a href="https://admin7.brinkpos.net" target="_blank">Portal</a> | <a href="https://admin7.brinkpos.net/SettingsEditor/" target="_blank">Settings</a> | <a href="https://admin7.brinkpos.net/Labor/Shifts/" target="_blank">Shifts</a> | <a href="https://admin7.brinkpos.net/Reports/Report/SalesSummary/" target="_blank">Sales Summary</a></li>
                                    <li><strong>Data Central:</strong> <a href="https://dc01.rmdatacentral.com/portal1311/" target="_blank">Portal</a> | <a href="https://dc01.rmdatacentral.com/portal1311/activities/posimport" target="_blank">Import</a> | <a href="https://dc01.rmdatacentral.com/portal1311/reports/reportdetail/da00ddc4-0d93-420e-ae97-f80b79519c89" target="_blank">Sales</a> | <a href="https://dc01.rmdatacentral.com/portal1311/reports/reportdetail/82dc7347-7db5-45e1-aaf1-b26cc74c8390" target="_blank">Labor</a></li>
                                    <li><strong>DoorDash:</strong> <a href="https://www.doordash.com/merchant/summary?store_id=2445844" target="_blank">Portal</a> | <a href="https://www.doordash.com/store/dairy-queen-courtenay-2445844/12849258/?preview=1" target="_blank">Live Menu</a></li>
                                    <li><strong>DQ Hub:</strong> <a href="https://dqhub.dairyqueen.net" target="_blank">Portal</a> | <a href="https://dqhub.dairyqueen.net/tools/cakes-order-management" target="_blank">Cake Orders</a> | <a href="https://dqhub.dairyqueen.net/tools/dqcakes-site-mgmt" target="_blank">Cake Site</a> | <a href="https://dqhub.dairyqueen.net/tools/digital-publishing" target="_blank">Publishing</a> | <a href="https://dqhub.dairyqueen.net/technology/national-mobile-deals-home/national-mobile-deals-overview" target="_blank">Mobile Deals</a></li>
                                    <li><strong>SkipTheDishes:</strong> <a href="https://restaurant.skipthedishes.com" target="_blank">Portal</a> | <a href="https://www.skipthedishes.com/restaurants/bb535b35-c6ba-4095-9abe-1409144d41da/draft" target="_blank">Live Menu</a></li>
                                    <li><strong>Uber Eats:</strong> <a href="https://merchants.ubereats.com/manager?uclick_id=21bcdceb-4afb-403b-ae09-774a3f9106c9" target="_blank">Portal</a></li>
                                    <li><strong>Cakes:</strong> <a href="https://web.na.bambora.com/admin/td_sDefault.asp" target="_blank">TD Portal</a></li>
                                    <li><strong>Menu:</strong> <a href="https://www.inpulseonline.com/idq/flex-local/login" target="_blank">Digital Board</a></li>
                                    <li><a href="rpt.html" target="_blank" title="Input a Summary Report from Brink in CSV format">Sales Summary Report Maker</a></li>
                                    <li><a href="dt.html" target="_blank" title="Input a Raw Car Data CSV file from HME Cloud">Drive-Thru Analysis</a></li>
                                    <li><a href="https://docs.google.com/spreadsheets/d/1TVc3wMJIMskp6LF2TVKo6yyPltUg7bo4GjFkc-oj0RA/edit?usp=sharing" target="_blank" title=":)">Preorder Tracker</a></li>
                                    <li><a href="logsheet.html" target="_blank" title=":O">Log Sheet Hub</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Current Conditions Slideshow Card -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                Current Conditions
                            </div>
                            <div class="card-body">
                                <div id="slideshow">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1037.jpg" alt="Camera 1037" class="active" title="Ryan Road | Refreshes every 5 minutes">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1038.jpg" alt="Camera 1038" title="17th St Bridge | Refreshes every 5 minutes">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1035.jpg" alt="Camera 1035" title="Superstore | Refreshes every 5 minutes">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1034.jpg" alt="Camera 1034" title="Dodge Dealership | Refreshes every 5 minutes">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1036.jpg" alt="Camera 1036" title="Manvirros | Refreshes every 5 minutes">
                                    <img src="https://cache.drivebc.ca/bchighwaycam/pub/cameras/1033.jpg" alt="Camera 1033" title="17th St Bridge | Refreshes every 5 minutes">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End of Main Content -->


            <!-- Footer -->
            <div class="footer">
                &copy; 2024 Dairy Queen Courtenay Managers Dashboard. All rights reserved.
            </div>
            <!-- End of Footer -->
        </div>
        <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->

    <!-- JavaScript Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

<!-- Custom Scripts -->
<script>
    // === Sidebar Toggle Script ===
    document.getElementById('sidebarToggle').addEventListener('click', function () {
        const sidebar = document.querySelector('.sidebar');
        sidebar.classList.toggle('collapsed'); // Toggles the 'collapsed' class
    });

    // === Dark Mode Toggle with Persistence ===
    const themeToggle = document.getElementById('themeToggle');
    const htmlElement = document.documentElement;

    // Function to update the toggle button icon based on the current theme
    function updateThemeToggleIcon(theme) {
        if (theme === 'dark') {
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>'; // Sun icon for dark mode
        } else {
            themeToggle.innerHTML = '<i class="fas fa-moon"></i>'; // Moon icon for light mode
        }
    }

    // Initialize theme based on saved preference or default to dark
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        htmlElement.setAttribute('data-theme', savedTheme);
        updateThemeToggleIcon(savedTheme);
    } else {
        htmlElement.setAttribute('data-theme', 'dark');
        updateThemeToggleIcon('dark');
    }

    // Event listener for theme toggle button
    themeToggle.addEventListener('click', function () {
        const currentTheme = htmlElement.getAttribute('data-theme');
        if (currentTheme === 'dark') {
            htmlElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
            updateThemeToggleIcon('light');
        } else {
            htmlElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            updateThemeToggleIcon('dark');
        }
    });

    // === Open Folder Function (Requires Backend Support) ===
    function openFolder(path) {
        if (window.pywebview && window.pywebview.api) {
            window.pywebview.api.open_folder(path);
        } else {
            alert('Folder access is not supported in this environment.');
        }
    }

    // === Open Window Function ===
    function openWindow(url) {
        const width = 1100;
        const height = 800;
        const left = (screen.width - width) / 2;
        const top = (screen.height - height) / 2;

        window.open(url, 'popupWindow', `width=${width},height=${height},scrollbars=yes,menubar=no,toolbar=no,location=no,status=no,left=${left},top=${top}`);
    }

    // === Update Date and Time ===
    function updateDateTime() {
        const now = new Date();
        const options = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        };
        const formattedDateTime = now.toLocaleString('en-US', options);
        document.getElementById('datetime').innerText = formattedDateTime;
    }
    setInterval(updateDateTime, 1000);
    updateDateTime(); // Initialize immediately

    // === Slideshow Functionality ===
    const slideshow = document.getElementById('slideshow');
    const images = slideshow.querySelectorAll('img');
    let currentIndex = 0;
    const totalImages = images.length;
    let slideshowInterval;
    const intervalTime = 5000; // 5 seconds

    // Initialize slideshow by ensuring only the first image has the 'active' class
    function initializeSlideshowStyles() {
        slideshow.style.position = 'relative';
        slideshow.style.overflow = 'hidden';
        images.forEach((img, index) => {
            img.classList.remove('active'); // Remove 'active' class from all images
        });
        if (images.length > 0) {
            images[0].classList.add('active'); // Add 'active' class to the first image
        }
    }

    // Show the next image by toggling the 'active' class
    function showNextImage() {
        images[currentIndex].classList.remove('active'); // Hide current image
        currentIndex = (currentIndex + 1) % totalImages; // Move to next image index
        images[currentIndex].classList.add('active'); // Show next image
    }

    // Start the slideshow interval
    function startSlideshow() {
        slideshowInterval = setInterval(showNextImage, intervalTime);
    }

    // Stop the slideshow interval
    function stopSlideshow() {
        clearInterval(slideshowInterval);
    }

    // Initialize the slideshow
    initializeSlideshowStyles();
    startSlideshow();

    // Pause slideshow on hover
    slideshow.addEventListener('mouseenter', stopSlideshow);
    slideshow.addEventListener('mouseleave', startSlideshow);

// === Reminders Functionality ===
const reminders = [
    // Existing reminders
    {
        type: 'weekly',
        daysOfWeek: [1, 5], // Monday and Friday
        title: 'Garbage Pickup Day',
        description: '<a href="https://docs.google.com/forms/d/e/1FAIpQLSdggWHDDqHn3jetrel2urG00Kh74LWltTho3Y9QB7zBre7QpQ/viewform?usp=sf_link">Form</a>'
    },
    {
        type: 'weekly',
        daysOfWeek: [2], // Tuesday
        title: 'Recycling Pickup Day',
        description: '<a href="https://docs.google.com/forms/d/e/1FAIpQLSdggWHDDqHn3jetrel2urG00Kh74LWltTho3Y9QB7zBre7QpQ/viewform?usp=sf_link">Form</a>'
    },
    {
        type: 'monthly',
        dayOfMonth: 1,
        title: 'Inventory',
        description: ' '
    },
    {
        type: 'specificDate',
        date: '2024-10-28',
        title: 'New Items Launching',
        description: 'Honey garlic strips, frozen hot chocolate, caramel java chip blizzard'
    },
    {
        type: 'specificDate',
        date: '2024-11-25',
        title: 'New Blizzard',
        description: 'Peppermint hot cocoa'
    },
    // Added specific date reminders
    // Income Assistance
    {
        type: 'specificDate',
        date: '2024-10-23',
        title: 'Income Assistance',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-11-20',
        title: 'Income Assistance',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-12-18',
        title: 'Income Assistance',
        description: ''
    },
    // Canada Child Benefit
    {
        type: 'specificDate',
        date: '2024-10-20',
        title: 'Canada Child Benefit',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-11-20',
        title: 'Canada Child Benefit',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-12-13',
        title: 'Canada Child Benefit',
        description: ''
    },
    // GST Credit
    {
        type: 'specificDate',
        date: '2024-10-05',
        title: 'GST Credit',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2025-01-05',
        title: 'GST Credit',
        description: ''
    },
    // Old Age Security and Pension Plan
    {
        type: 'specificDate',
        date: '2024-10-27',
        title: 'Old Age Security and Pension Plan',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-11-28',
        title: 'Old Age Security and Pension Plan',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-12-20',
        title: 'Old Age Security and Pension Plan',
        description: ''
    },
    // Holidays
    {
        type: 'specificDate',
        date: '2024-10-14',
        title: 'Thanksgiving',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-11-29',
        title: 'Black Friday',
        description: ''
    },
    {
        type: 'specificDate',
        date: '2024-12-25',
        title: 'Christmas',
        description: ''
    },
];

// Function to check if a reminder is upcoming
function isReminderUpcoming(reminder, today, daysAhead) {
    const upcomingDate = new Date(today);
    upcomingDate.setDate(today.getDate() + daysAhead);

    switch (reminder.type) {
        case 'specificDate':
            let [year, month, day] = reminder.date.split('-').map(Number);
            let reminderDate = new Date(year, month - 1, day);
            reminderDate.setHours(0, 0, 0, 0);
            return reminderDate >= today && reminderDate <= upcomingDate;
        case 'weekly':
            for (let i = 0; i <= daysAhead; i++) {
                let date = new Date(today);
                date.setDate(today.getDate() + i);
                let dayOfWeek = date.getDay(); // 0=Sunday
                if (reminder.daysOfWeek.includes(dayOfWeek)) {
                    return true;
                }
            }
            return false;
        case 'monthly':
            for (let i = 0; i <= daysAhead; i++) {
                let date = new Date(today);
                date.setDate(today.getDate() + i);
                if (date.getDate() === reminder.dayOfMonth) {
                    return true;
                }
            }
            return false;
        case 'nthDayOfMonth':
            for (let i = 0; i <= daysAhead; i++) {
                let date = new Date(today);
                date.setDate(today.getDate() + i);
                if (isNthDayOfMonth(date, reminder.nth, reminder.dayOfWeek)) {
                    return true;
                }
            }
            return false;
        default:
            return false;
    }
}

// Function to check if a date is the nth occurrence of a day of week in the month
function isNthDayOfMonth(date, nth, dayOfWeek) {
    if (date.getDay() !== dayOfWeek) return false;
    let count = 0;
    let tempDate = new Date(date.getFullYear(), date.getMonth(), 1);
    while (tempDate <= date) {
        if (tempDate.getDay() === dayOfWeek) {
            count++;
        }
        tempDate.setDate(tempDate.getDate() + 1);
    }
    return count === nth;
}

// Function to display upcoming reminders
// Function to display upcoming reminders
function displayReminders() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const daysAhead = 14; // Show reminders for the next 14 days
    const reminderList = document.getElementById('reminderList');
    reminderList.innerHTML = '';

    // Array to hold upcoming reminders with their dates
    let upcomingReminders = [];

    reminders.forEach(function (reminder) {
        if (isReminderUpcoming(reminder, today, daysAhead)) {
            let reminderDate = getReminderDate(reminder, today);
            if (reminderDate) {
                upcomingReminders.push({
                    reminder: reminder,
                    date: reminderDate
                });
            }
        }
    });

    // Sort the upcoming reminders by date
    upcomingReminders.sort(function (a, b) {
        return a.date - b.date;
    });

    // Display the sorted reminders
    upcomingReminders.forEach(function (item) {
        let li = document.createElement('li');
        let dateString = item.date.toLocaleDateString();

        // Check if the reminder date is today
        let isToday = item.date.getTime() === today.getTime();

        // Add a star if the reminder is today
        let star = isToday ? ' ★' : '';

        li.innerHTML = '<strong>' + item.reminder.title + '</strong>' + star + ' (' + dateString + '): ' + item.reminder.description;
        reminderList.appendChild(li);
    });
}


// Function to get the date of the upcoming reminder
function getReminderDate(reminder, today) {
    switch (reminder.type) {
        case 'specificDate':
            let [year, month, day] = reminder.date.split('-').map(Number);
            return new Date(year, month - 1, day);
        case 'weekly':
            for (let i = 0; i <= 7; i++) {
                let date = new Date(today);
                date.setDate(today.getDate() + i);
                if (reminder.daysOfWeek.includes(date.getDay())) {
                    return date;
                }
            }
            return null;
        case 'monthly':
            let date = new Date(today.getFullYear(), today.getMonth(), reminder.dayOfMonth);
            if (date < today) {
                date.setMonth(date.getMonth() + 1);
            }
            return date;
        case 'nthDayOfMonth':
            let nthDate = getNthDayOfMonthDate(today, reminder.nth, reminder.dayOfWeek);
            if (nthDate < today) {
                nthDate = getNthDayOfMonthDate(new Date(today.getFullYear(), today.getMonth() + 1, 1), reminder.nth, reminder.dayOfWeek);
            }
            return nthDate;
        default:
            return null;
    }
}

// Function to get the date of the nth occurrence of a day of week in a month
function getNthDayOfMonthDate(startDate, nth, dayOfWeek) {
    let date = new Date(startDate.getFullYear(), startDate.getMonth(), 1);
    let count = 0;
    while (date.getMonth() === startDate.getMonth()) {
        if (date.getDay() === dayOfWeek) {
            count++;
            if (count === nth) {
                return new Date(date); // Return a copy of the date
            }
        }
        date.setDate(date.getDate() + 1);
    }
    return null;
}

// Run displayReminders on initialization
displayReminders();

    // === Open Folder Function (Alternative Toggle for Mobile) ===
    // If you need an alternative sidebar toggle for mobile devices, uncomment and modify as needed
    /*
    document.getElementById('sidebarToggleMobile').addEventListener('click', function () {
        const sidebar = document.querySelector('.sidebar');
        const contentWrapper = document.getElementById('content-wrapper');
        sidebar.classList.toggle('active');
        contentWrapper.classList.toggle('active');
    });
    */

    // === Additional Event Listeners or Functions ===
    // Add any additional scripts or event listeners below as needed
</script>

</body>

</html>
